<div class="record-form-container">

  <h2 class="page-title">
    {{ isEdit ? "Editar Usuario" : "Crear Usuario" }}
  </h2>

  <!-- Loading -->
  <div *ngIf="loading" class="loading-box">
    <div class="spinner"></div>
  </div>

  <form *ngIf="!loading" (ngSubmit)="save()">

    <!-- ============================
         üìå Datos del Usuario
    ============================ -->
    <div class="form-section">

      <!-- Nombre -->
      <div class="form-group">
        <label>Nombre completo</label>
        <input 
          type="text" 
          [(ngModel)]="form.name" 
          name="name"
          required>
      </div>

      <!-- Email -->
      <div class="form-group">
        <label>Correo</label>
        <input 
          type="email" 
          [(ngModel)]="form.email" 
          name="email"
          required>
      </div>

      <!-- Password -->
      <div class="form-group">
        <label>Contrase√±a</label>

        <input 
          type="password"
          [(ngModel)]="form.password"
          name="password"
          [required]="!isEdit"
          placeholder="{{ isEdit ? 'Dejar en blanco para no modificar' : '' }}"
        >
      </div>

      <!-- Rol -->
      <div class="form-group">
        <label>Rol</label>
        <select 
          [(ngModel)]="form.role_id" 
          name="role_id"
          required>
          <option [ngValue]="null" disabled>Seleccionar rol...</option>
          <option *ngFor="let r of roles" [ngValue]="r.id">
            {{ r.name }}
          </option>
        </select>
      </div>

    </div>

    <!-- ============================
         üìå BOTONES
    ============================ -->
    <div class="form-actions">
      <button class="btn-primary" [disabled]="saving">
        {{ saving ? "Guardando..." : (isEdit ? "Actualizar" : "Crear Usuario") }}
      </button>

      <button 
        type="button" 
        class="btn-secondary-custom"
        (click)="router.navigate(['/dashboard/users'])">
        Cancelar
      </button>
    </div>

  </form>

</div>
